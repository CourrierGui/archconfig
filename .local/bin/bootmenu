#!/bin/sh

distro=$(lsb_release -is)

# A dmenu wrapper script for system functions.

if [ "$distro" = "Arch" ];
then
    cmds="\
shutdown ğŸ–¥:${shut:-doas shutdown now}
reboot ğŸ”ƒ:${reb:-doas reboot}
renew dwm â™»:kill -HUP $(pidof -s dwm)
leave dwm ğŸšª:kill -TERM $(pidof -s dwm)
lock ğŸ”’:slock
hibernate ğŸ»:${hib:-sudo -A systemctl suspend-then-hibernate}"
else
    cmds="\
shutdown ğŸ–¥:${shut:-doas runit-init 0}
reboot ğŸ”ƒ:${reb:-doas runit-init 6}
renew dwm â™»:kill -HUP $(pidof -s dwm)
leave dwm ğŸšª:kill -TERM $(pidof -s dwm)
lock ğŸ”’:slock
hibernate ğŸ»:${hib:-sudo -A systemctl suspend-then-hibernate}"
fi

choice="$(echo "$cmds" | cut -d ':' -f 1 | dmenu -x 10 -y 10)" || exit 1

`echo "$cmds" | grep "^$choice:" | cut -d ':' -f2-`
